{"ast":null,"code":"import _objectSpread from\"D:/Star-db/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createStore,applyMiddleware}from\"redux\";import thunk from\"redux-thunk\";import{getUsers}from\"../data/data\";var START_LOADING='START_LOADING';var HANDLE_SUCCESS='HANDLE_SUCCESS';var HANDLE_ERROR='HANDLE_ERROR ';export var startLoading=function startLoading(){return{type:START_LOADING};};export var handleError=function handleError(){return{type:HANDLE_ERROR};};export var handleSuccess=function handleSuccess(users){return{type:HANDLE_SUCCESS,users:users};};export var loadUsers=function loadUsers(){return function(dispatch){store.dispatch(startLoading());return getUsers().then(function(users){return store.dispatch(handleSuccess(users));}).catch(function(){return store.dispatch(handleError());});};};var initialState={users:[],isLoading:false,hasError:false,activeUsers:[]};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case START_LOADING:return _objectSpread(_objectSpread({},state),{},{isLoading:true,hasError:false});case HANDLE_SUCCESS:return _objectSpread(_objectSpread({},state),{},{users:action.users,isLoading:false});case HANDLE_ERROR:return _objectSpread(_objectSpread({},state),{},{hasError:true,isLoading:false});default:return state;}};if(!localStorage.getItem('activeUsers')){localStorage.setItem('activeUsers',JSON.stringify([]));}var store=createStore(reducer,initialState,applyMiddleware(thunk));store.subscribe(function(){localStorage['redux-store']=JSON.stringify(store.getState());});export default store;","map":{"version":3,"sources":["D:/Star-db/my-app/src/component/UsersStore/index.js"],"names":["createStore","applyMiddleware","thunk","getUsers","START_LOADING","HANDLE_SUCCESS","HANDLE_ERROR","startLoading","type","handleError","handleSuccess","users","loadUsers","dispatch","store","then","catch","initialState","isLoading","hasError","activeUsers","reducer","state","action","localStorage","getItem","setItem","JSON","stringify","subscribe","getState"],"mappings":"mGAAA,OAAQA,WAAR,CAAqBC,eAArB,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAAQC,QAAR,KAAuB,cAAvB,CAEA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CACA,GAAMC,CAAAA,cAAc,CAAG,gBAAvB,CACA,GAAMC,CAAAA,YAAY,CAAG,eAArB,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAO,CAACC,IAAI,CAAEJ,aAAP,CAAP,EAArB,CACP,MAAO,IAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAO,CAACD,IAAI,CAAEF,YAAP,CAAP,EAApB,CAEP,MAAO,IAAMI,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,QAAY,CACrCH,IAAI,CAAEH,cAD+B,CAErCM,KAAK,CAALA,KAFqC,CAAZ,EAAtB,CAKP,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,MAAO,UAACC,QAAD,CAAc,CACjBC,KAAK,CAACD,QAAN,CAAeN,YAAY,EAA3B,EAEA,MAAOJ,CAAAA,QAAQ,GACVY,IADE,CACG,SAACJ,KAAD,QAAWG,CAAAA,KAAK,CAACD,QAAN,CAAeH,aAAa,CAACC,KAAD,CAA5B,CAAX,EADH,EAEFK,KAFE,CAEI,iBAAMF,CAAAA,KAAK,CAACD,QAAN,CAAeJ,WAAW,EAA1B,CAAN,EAFJ,CAAP,CAGH,CAND,CAOH,CARM,CAWP,GAAMQ,CAAAA,YAAY,CAAG,CACjBN,KAAK,CAAE,EADU,CAEjBO,SAAS,CAAE,KAFM,CAGjBC,QAAQ,CAAE,KAHO,CAIjBC,WAAW,CAAE,EAJI,CAArB,CAQA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBL,YAAyB,IAAXM,CAAAA,MAAW,2CAC9C,OAAQA,MAAM,CAACf,IAAf,EACI,IAAKJ,CAAAA,aAAL,CACI,sCACOkB,KADP,MAEIJ,SAAS,CAAE,IAFf,CAGIC,QAAQ,CAAE,KAHd,GAKJ,IAAKd,CAAAA,cAAL,CACI,sCACOiB,KADP,MAEIX,KAAK,CAAEY,MAAM,CAACZ,KAFlB,CAGIO,SAAS,CAAE,KAHf,GAKJ,IAAKZ,CAAAA,YAAL,CACI,sCACOgB,KADP,MAEIH,QAAQ,CAAE,IAFd,CAGID,SAAS,CAAE,KAHf,GAMJ,QACI,MAAOI,CAAAA,KAAP,CArBR,CAuBH,CAxBD,CA0BA,GAAI,CAACE,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAL,CAA0C,CACtCD,YAAY,CAACE,OAAb,CAAqB,aAArB,CAAoCC,IAAI,CAACC,SAAL,CAAe,EAAf,CAApC,EACH,CAGD,GAAMd,CAAAA,KAAK,CAAGd,WAAW,CAACqB,OAAD,CAAUJ,YAAV,CAAwBhB,eAAe,CAACC,KAAD,CAAvC,CAAzB,CAEAY,KAAK,CAACe,SAAN,CAAgB,UAAM,CAClBL,YAAY,CAAC,aAAD,CAAZ,CAA8BG,IAAI,CAACC,SAAL,CAAed,KAAK,CAACgB,QAAN,EAAf,CAA9B,CACH,CAFD,EAKA,cAAehB,CAAAA,KAAf","sourcesContent":["import {createStore, applyMiddleware} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport {getUsers} from \"../data/data\";\r\n\r\nconst START_LOADING = 'START_LOADING';\r\nconst HANDLE_SUCCESS = 'HANDLE_SUCCESS';\r\nconst HANDLE_ERROR = 'HANDLE_ERROR ';\r\n\r\nexport const startLoading = () => ({type: START_LOADING})\r\nexport const handleError = () => ({type: HANDLE_ERROR})\r\n\r\nexport const handleSuccess = (users) => ({\r\n    type: HANDLE_SUCCESS,\r\n    users\r\n})\r\n\r\nexport const loadUsers = () => {\r\n    return (dispatch) => {\r\n        store.dispatch(startLoading());\r\n\r\n        return getUsers()\r\n            .then((users) => store.dispatch(handleSuccess(users)))\r\n            .catch(() => store.dispatch(handleError()))\r\n    }\r\n}\r\n\r\n\r\nconst initialState = {\r\n    users: [],\r\n    isLoading: false,\r\n    hasError: false,\r\n    activeUsers: []\r\n}\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case START_LOADING:\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                hasError: false\r\n            }\r\n        case HANDLE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                users: action.users,\r\n                isLoading: false\r\n            }\r\n        case HANDLE_ERROR:\r\n            return {\r\n                ...state,\r\n                hasError: true,\r\n                isLoading: false\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nif (!localStorage.getItem('activeUsers')) {\r\n    localStorage.setItem('activeUsers', JSON.stringify([]))\r\n}\r\n\r\n\r\nconst store = createStore(reducer, initialState, applyMiddleware(thunk));\r\n\r\nstore.subscribe(() => {\r\n    localStorage['redux-store'] = JSON.stringify(store.getState())\r\n})\r\n\r\n\r\nexport default store;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}