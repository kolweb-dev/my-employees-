(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{32:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){"use strict";s.r(t);var r=s(1),a=s.n(r),c=s(6),n=s.n(c),i=s(11),o=s.n(i),l=s(14),u=s(5),d=s(15),j=s(16),h=s(21),v=s(19),b=s(9),O=(s(32),s(0)),m=function(){return Object(O.jsxs)("div",{className:"lds-roller",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})},p=s(2),f=s(13),x=s(18),y="START_LOADING",g="HANDLE_SUCCESS",N="HANDLE_ERROR ",U=function(){return function(e){return S.dispatch({type:y}),fetch("https://yalantis-react-school-api.yalantis.com/api/task0/users").then((function(e){if(!e.ok)throw Promise.reject("".concat(e.status," - ").concat(e.statusText));return e.json()})).then((function(e){return S.dispatch(function(e){return{type:g,users:e}}(e))})).catch((function(){return S.dispatch({type:N})}))}},E={users:[],isLoading:!1,hasError:!1,activeUsers:[]};localStorage.getItem("activeUsers")||localStorage.setItem("activeUsers",JSON.stringify([]));var S=Object(f.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case g:return Object(p.a)(Object(p.a)({},e),{},{users:t.users,isLoading:!1});case N:return Object(p.a)(Object(p.a)({},e),{},{hasError:!0,isLoading:!1});default:return e}}),E,Object(f.a)(x.a));S.subscribe((function(){localStorage["redux-store"]=JSON.stringify(S.getState())}));var _=S,A=s(3),I=s.n(A),L=(s(34),s(35),s(36),function(e){var t=e.firstName,s=e.lastName,r=e.birthday,a=new Date(r),c=a.toLocaleString("eng",{month:"long"}),n="".concat(t," ").concat(s),i="".concat(n," - ").concat(a.getDay()," ").concat(c,", ").concat(a.getFullYear()," year");return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{className:"EmployeeBirthday__title",children:c}),Object(O.jsx)("span",{className:"EmployeeBirthday-date",children:i})]})}),J=function(e){var t=e.activeUsers;return Object(O.jsxs)("div",{className:"EmployeeBirthday",children:[Object(O.jsx)("h2",{children:"Employees birthday"}),Object(O.jsx)("div",{className:"EmployeeBirthday__list",children:Object(O.jsx)("ul",{children:t.map((function(e){return Object(O.jsx)("li",{className:"EmployeeBirthday__list-li",children:Object(O.jsx)(L,{firstName:e.firstName,lastName:e.lastName,birthday:e.dob})},"".concat(e.id+Math.random()))}))})})]})},k=s(8),w=(s(37),s(20)),C=(s(38),function(e){var t=e.user,s=e.addActiveUser,a=e.removeActiveUser,c=Object(r.useContext)(R),n=t.firstName,i=t.lastName,o=Object(r.useState)(null),l=Object(w.a)(o,2),u=l[0],d=l[1],j=Math.random();return Object(O.jsxs)("div",{className:"User",children:[Object(O.jsx)("h3",{className:"User__title",style:{color:u||c.find((function(e){return e.id===t.id}))?"blue":"black"},children:"".concat(i," ").concat(n)}),Object(O.jsxs)("div",{className:"User_radio",children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"radio",name:"BIRTH".concat(j),value:"active",onChange:function(e){d(!0),s(t)},checked:!0===u||!!c.find((function(e){return e.id===t.id}))}),"active"]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"radio",name:"BIRTH".concat(j),value:"notActive",onChange:function(e){d(!1),a(t.id)},checked:!1===u}),"not active"]})]})]})}),B=function(e){var t=e.users,s=e.addActiveUser,r=e.removeActiveUser,a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t.sort((function(e,t){var s=e.lastName.toLowerCase(),r=t.lastName.toLowerCase();return s<r?-1:s>r?1:0}));var c=[];return a.forEach((function(e){c.push(Object(k.a)({},e,Object(u.a)(t).filter((function(t){return t.lastName[0]===e}))))})),Object(O.jsxs)("div",{className:"Employees",children:[Object(O.jsx)("h2",{children:"Employees"}),Object(O.jsx)("div",{className:"Employees__inner",children:c.map((function(e,t){return Object(O.jsxs)("span",{className:"Employee__item",children:[Object(O.jsx)("h2",{children:a[t]}),Object(O.jsx)("ul",{className:"Employees__list",children:0===e[a[t]].length?Object(O.jsx)("li",{className:"not-users",children:" ----- "}):e[a[t]].map((function(e){return Object(O.jsx)("li",{className:"Employees__list-li",children:Object(O.jsx)(C,{user:e,addActiveUser:s,removeActiveUser:r})},e.id)}))})]})}))})]})},R=a.a.createContext([]);var D=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(){var e;Object(d.a)(this,s);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={activeUsers:JSON.parse(localStorage.getItem("activeUsers"))},e.addActiveUser=function(t){var s=JSON.parse(localStorage.getItem("activeUsers"));localStorage.setItem("activeUsers",JSON.stringify([].concat(Object(u.a)(s),[t]))),e.setState({activeUsers:JSON.parse(localStorage.getItem("activeUsers"))})},e.removeActiveUser=function(t){var s=JSON.parse(localStorage.getItem("activeUsers")),r=s.findIndex((function(e){return e.id===t}));s.splice(r,1),localStorage.setItem("activeUsers",JSON.stringify(Object(u.a)(s))),e.setState({activeUsers:JSON.parse(localStorage.getItem("activeUsers"))})},e}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.activeUsers,t=this.props,s=t.users,r=t.isLoading,a=t.hasError;return r?Object(O.jsx)(m,{}):a?Object(O.jsx)("p",{children:"Error occurred!!!"}):Object(O.jsxs)("div",{className:"Employee",children:[Object(O.jsx)("div",{className:"Employee-left",children:Object(O.jsx)(R.Provider,{value:e,children:Object(O.jsx)(B,{users:s,addActiveUser:this.addActiveUser,removeActiveUser:this.removeActiveUser})})}),Object(O.jsx)(J,{activeUsers:e})]})}}]),s}(a.a.Component);D.defaultProps={users:[]},D.protoType={users:I.a.arrayOf(I.a.object),isLoading:I.a.bool.isRequired,hasError:I.a.bool.isRequired};var T=Object(b.b)((function(e){return{users:e.users,isLoading:e.isLoading,hasError:e.hasError}}),(function(e){return{loadUsers:function(){return e(U())}}}))(D);n.a.render(Object(O.jsx)(b.a,{store:_,children:Object(O.jsx)(T,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.333e51c3.chunk.js.map